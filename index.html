<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Constat d'État Intelligent</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { padding: 1rem; background: #f3f4f6; }
    .step { display: none; }
    .step.active { display: block; }
    .buttons { margin-top: 1rem; display: flex; justify-content: space-between; }
    input, select, textarea { color: #000; opacity: 1; }
    fieldset { margin-top: 1rem; border: 1px solid #ccc; padding: 1rem; border-radius: 0.5rem; }
    legend { font-weight: bold; }
  </style>
</head>
<body>
  <div class="max-w-2xl mx-auto bg-white p-6 rounded-lg shadow">
    <h1 class="text-2xl font-bold text-center mb-4">Constat d'État Intelligent</h1>
    <form id="wizardForm">
      <!-- Étape 1 : Informations générales -->
      <div class="step active" data-step="1">
        <h2 class="font-semibold mb-2">1. Informations générales</h2>
        <label class="block mb-1">Titre de l'œuvre
          <input type="text" name="titre" class="w-full border p-2 rounded" required>
        </label>
        <label class="block mb-1">Artiste
          <input type="text" name="artiste" class="w-full border p-2 rounded">
        </label>
        <label class="block mb-1">Année de création
          <input type="number" name="annee" class="w-full border p-2 rounded">
        </label>
      </div>

      <!-- Étape 2 : Description & Dimensions -->
      <div class="step" data-step="2">
        <h2 class="font-semibold mb-2">2. Description & Dimensions</h2>
        <label class="block mb-1">Type d'œuvre
          <select name="type" class="w-full border p-2 rounded">
            <option>Installation</option><option>Sculpture</option><option>Peinture</option><option>Fresque</option><option>Autre</option>
          </select>
        </label>
        <label class="block mb-1">Matériaux & technologies
          <textarea name="tech" rows="3" class="w-full border p-2 rounded" placeholder="Ex : toile, pigments, vernis..."></textarea>
        </label>
        <div class="grid grid-cols-3 gap-2">
          <label>H (cm)<input type="number" name="hauteur" class="w-full border p-2 rounded"></label>
          <label>L (cm)<input type="number" name="largeur" class="w-full border p-2 rounded"></label>
          <label>P (cm)<input type="number" name="profondeur" class="w-full border p-2 rounded"></label>
        </div>
        <fieldset>
          <legend>Cadre</legend>
          <label><input type="radio" name="cadre" value="oui"> Avec cadre</label>
          <label class="ml-4"><input type="radio" name="cadre" value="non"> Sans cadre</label>
        </fieldset>
      </div>

      <!-- Étape 3 : Support (toile) -->
      <div class="step" data-step="3">
        <h2 class="font-semibold mb-2">3. Support (toile)</h2>
        <fieldset>
          <legend>Dégradations du support</legend>
          <label><input type="checkbox" name="deg_support" value="craquelures_support"> Craquelures</label>
          <label><input type="checkbox" name="deg_support" value="trous"> Trous / Perforations</label>
          <label><input type="checkbox" name="deg_support" value="dechirures"> Déchirures</label>
          <label><input type="checkbox" name="deg_support" value="deformation_support"> Déformations / Ondulations</label>
          <label><input type="checkbox" name="deg_support" value="moisissures_support"> Moisissures</label>
          <label><input type="checkbox" name="deg_support" value="attache_detache"> Attaches lâches / Détachées</label>
        </fieldset>
      </div>

      <!-- Étape 4 : Couche picturale -->
      <div class="step" data-step="4">
        <h2 class="font-semibold mb-2">4. Couche picturale</h2>
        <fieldset>
          <legend>Dégradations de la couche picturale</legend>
          <label><input type="checkbox" name="deg_couche" value="ecaillement"> Écaillage</label>
          <label><input type="checkbox" name="deg_couche" value="fissures"> Fissures</label>
          <label><input type="checkbox" name="deg_couche" value="decollement"> Décollement</label>
          <label><input type="checkbox" name="deg_couche" value="perte_matiere"> Perte de matière</label>
          <label><input type="checkbox" name="deg_couche" value="taches"> Taches (huile, salissures)</label>
          <label><input type="checkbox" name="deg_couche" value="abrasion"> Abrasion / Usure de surface</label>
        </fieldset>
      </div>

      <!-- Étape 5 : Vernis -->
      <div class="step" data-step="5">
        <h2 class="font-semibold mb-2">5. Vernis</h2>
        <fieldset>
          <legend>Dégradations liées au vernis</legend>
          <label><input type="checkbox" name="deg_vernis" value="jaunissement"> Jaunissement</label>
          <label><input type="checkbox" name="deg_vernis" value="craquelures_vernis"> Craquelures de vernis</label>
          <label><input type="checkbox" name="deg_vernis" value="opacification"> Opacification / Voilage</label>
          <label><input type="checkbox" name="deg_vernis" value="perte_brillance"> Perte de brillance</label>
          <label><input type="checkbox" name="deg_vernis" value="decollement_vernis"> Décollement de vernis</label>
          <label><input type="checkbox" name="deg_vernis" value="taches_vernis"> Taches / Gouttes de vernis</label>
        </fieldset>
      </div>

      <!-- Étape 6 : Insectes & Avifaune -->
      <div class="step" data-step="6">
        <h2 class="font-semibold mb-2">6. Insectes & Avifaune</h2>
        <fieldset>
          <legend>Dégradations par insectes et élevage</legend>
          <label><input type="checkbox" name="deg_insectes" value="traces_chenille"> Traces de chenilles</label>
          <label><input type="checkbox" name="deg_insectes" value="perforations_insectes"> Perforations</label>
          <label><input type="checkbox" name="deg_insectes" value="dejections"> Déjections d'insectes / oiseaux</label>
        </fieldset>
      </div>

      <!-- Étape 7 : Photo & Envoi -->
      <div class="step" data-step="7">
        <h2 class="font-semibold mb-2">7. Photo & Envoi</h2>
        <label class="block mb-2">Ajouter une photo
          <input type="file" name="photo" accept="image/*" id="photoInput" class="w-full">
        </label>
        <div id="photoPreview" class="mb-2"></div>
        <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded">Terminer & Envoyer</button>
      </div>

      <div class="buttons">
        <button type="button" id="prevBtn" class="bg-gray-300 px-4 py-2 rounded" disabled>Précédent</button>
        <button type="button" id="nextBtn" class="bg-blue-600 text-white px-4 py-2 rounded">Suivant</button>
      </div>
    </form>
    <div id="message" class="mt-4 text-center text-green-600"></div>
  </div>

  <script>
    const steps = document.querySelectorAll('.step');
    let current = 0;
    document.getElementById('nextBtn').addEventListener('click', () => changeStep(1));
    document.getElementById('prevBtn').addEventListener('click', () => changeStep(-1));
    function changeStep(n) {
      steps[current].classList.remove('active');
      current += n;
      if (current < 0) current = 0;
      if (current >= steps.length) current = steps.length - 1;
      steps[current].classList.add('active');
      document.getElementById('prevBtn').disabled = current === 0;
      document.getElementById('nextBtn').style.display = current === steps.length - 1 ? 'none' : 'inline-block';
    }
    document.getElementById('photoInput').addEventListener('change', function(e) {
      const preview = document.getElementById('photoPreview'); preview.innerHTML = '';
      const file = e.target.files[0]; if (file) {
        const img = document.createElement('img'); img.src = URL.createObjectURL(file);
        img.className = 'max-w-full border rounded'; preview.appendChild(img);
      }
    });
    document.getElementById('wizardForm').addEventListener('submit', function(e) {
      e.preventDefault();
      document.getElementById('message').textContent = 'Constat envoyé !';
    });
  </script>
</body>
</html>
