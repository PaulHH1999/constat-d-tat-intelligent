<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Constat d'État Intelligent</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { padding: 1rem; background: #f3f4f6; }
    .step { display: none; }
    .step.active { display: block; }
    .buttons { margin-top: 1rem; display: flex; justify-content: space-between; }
    input, select, textarea { color: #000; opacity: 1; }
  </style>
</head>
<body>
  <div class="max-w-2xl mx-auto bg-white p-6 rounded-lg shadow">
    <h1 class="text-2xl font-bold text-center mb-4">Constat d'État Intelligent</h1>
    <form id="wizardForm">
      <!-- Étape 1 : Infos générales -->
      <div class="step active" data-step="1">
        <h2 class="font-semibold mb-2">1. Informations générales</h2>
        <label class="block mb-1">Titre de l'œuvre<input type="text" name="titre" class="w-full border p-2 rounded" required></label>
        <label class="block mb-1">Artiste<input type="text" name="artiste" class="w-full border p-2 rounded"></label>
        <label class="block mb-1">Année de création<input type="number" name="annee" class="w-full border p-2 rounded"></label>
      </div>
      <!-- Étape 2 : Description et dimensions -->
      <div class="step" data-step="2">
        <h2 class="font-semibold mb-2">2. Description & Dimensions</h2>
        <label class="block mb-1">Type d'œuvre<select name="type" class="w-full border p-2 rounded">
          <option>Installation</option><option>Sculpture</option><option>Peinture</option><option>Autre</option>
        </select></label>
        <label class="block mb-1">Matériaux & technologies<textarea name="tech" rows="3" class="w-full border p-2 rounded" placeholder="Ex : bois, capteurs, microcontrôleur..."></textarea></label>
        <div class="grid grid-cols-3 gap-2">
          <label>H (cm)<input type="number" name="hauteur" class="w-full border p-2 rounded"></label>
          <label>L (cm)<input type="number" name="largeur" class="w-full border p-2 rounded"></label>
          <label>P (cm)<input type="number" name="profondeur" class="w-full border p-2 rounded"></label>
        </div>
      </div>
      <!-- Étape 3 : État et dégradations -->
      <div class="step" data-step="3">
        <h2 class="font-semibold mb-2">3. État & Dégradations</h2>
        <label><input type="checkbox" name="degradations" value="craquelures"> Craquelures</label>
        <label><input type="checkbox" name="degradations" value="fissures"> Fissures</label>
        <label><input type="checkbox" name="degradations" value="ecaillement"> Écaillage</label>
        <label><input type="checkbox" name="degradations" value="decoloration"> Décoloration</label>
        <label><input type="checkbox" name="degradations" value="taches"> Taches</label>
        <label class="block mt-2">Commentaires<textarea name="commentaires" rows="4" class="w-full border p-2 rounded"></textarea></label>
      </div>
      <!-- Étape 4 : Photo & finalisation -->
      <div class="step" data-step="4">
        <h2 class="font-semibold mb-2">4. Photo & Envoi</h2>
        <label class="block mb-2">Ajouter une photo<input type="file" name="photo" accept="image/*" id="photoInput" class="w-full"></label>
        <div id="photoPreview" class="mb-2"></div>
        <button type="submit" class="w-full bg-blue-600 text-white py-2 rounded">Terminer & Envoyer</button>
      </div>
      <div class="buttons">
        <button type="button" id="prevBtn" class="bg-gray-300 px-4 py-2 rounded" disabled>Précédent</button>
        <button type="button" id="nextBtn" class="bg-blue-600 text-white px-4 py-2 rounded">Suivant</button>
      </div>
    </form>
    <div id="message" class="mt-4 text-center text-green-600"></div>
  </div>

  <script>
    const steps = document.querySelectorAll('.step');
    let current = 0;
    document.getElementById('nextBtn').addEventListener('click', () => changeStep(1));
    document.getElementById('prevBtn').addEventListener('click', () => changeStep(-1));
    function changeStep(n) {
      steps[current].classList.remove('active');
      current += n;
      if (current < 0) current = 0;
      if (current >= steps.length) current = steps.length - 1;
      steps[current].classList.add('active');
      document.getElementById('prevBtn').disabled = current === 0;
      document.getElementById('nextBtn').style.display = current === steps.length - 1 ? 'none' : 'inline-block';
    }
    document.getElementById('photoInput').addEventListener('change', function(e) {
      const preview = document.getElementById('photoPreview'); preview.innerHTML = '';
      const file = e.target.files[0]; if (file) {
        const img = document.createElement('img'); img.src = URL.createObjectURL(file);
        img.className = 'max-w-full border rounded'; preview.appendChild(img);
      }
    });
    document.getElementById('wizardForm').addEventListener('submit', function(e) {
      e.preventDefault();
      // Ici on pourrait envoyer les données via fetch
      document.getElementById('message').textContent = 'Constat envoyé !';
    });
  </script>
</body>
</html>
